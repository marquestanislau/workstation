<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head></h:head>
<h:body>
	<ui:composition template="/pages/template/template.xhtml">
		<ui:define name="center">
			<h:form id="frm">
				<p:menubar>
					<f:facet name="options">
						<p:menuitem>
							<p:commandButton value="Imprimir" icon="ui-icon-print" />
						</p:menuitem>
					</f:facet>
				</p:menubar>
				<p:growl id="growl" showDetail="true" />

				<p:panelGrid columns="1" layout="grid">

					<p:dataTable emptyMessage="Sem usuarios cadastrados" id="dataTable"
						var="user" rows="10" value="#{userBean.users}" paginator="true"
						selectionMode="single" selection="#{userBean.user}"
						rowKey="#{user.id}">
						<p:ajax event="rowSelect" listener="#{userBean.onRowSelect}"
							update=":frm:growl" />
						<p:column headerText="Nome">
							<p:outputLabel value="#{user.nome}" />
						</p:column>
						<p:column headerText="Apelido">
							<p:outputLabel value="#{user.apelido}" />
						</p:column>
						<p:column headerText="Email">
							<p:outputLabel value="#{user.email}" />
						</p:column>
						<p:column headerText="Data de registro">
							<p:outputLabel value="#{user.created.time}">
								<f:convertDateTime pattern="dd/MM/yy" type="date" />
							</p:outputLabel>
						</p:column>
						<p:column headerText="Contacto">
							<p:outputLabel value="#{user.cell}" />
						</p:column>
						<p:column headerText="Role">
							<p:outputLabel value="#{user.role}" />
						</p:column>
						<p:column headerText="">
							<p:commandButton icon="ui-icon-trash" />
							<p:commandButton update=":frm:userDetail"
								oncomplete="PF('update_dialog').show()" icon="ui-icon-pencil"
								process="dataTable" />
							<p:commandButton update=":frm:viewUser"
								oncomplete="PF('view_dialog').show()" icon="ui-icon-search"
								process="dataTable" />
						</p:column>
						<p:columnGroup type="footer">
							<p:row>
								<p:column colspan="6" style="text-align: right;"
									footerText="Numero total de usuarios:" />
								<p:column footerText="#{userBean.totalUsers}" />
							</p:row>
						</p:columnGroup>
					</p:dataTable>
					<f:facet name="footer">
						<p:spacer width="10" />
						<p:commandButton icon="ui-icon-plus" value="Novo Cadastro" />
					</f:facet>
				</p:panelGrid>

				<p:dialog resizable="false" closable="true"
					widgetVar="update_dialog" showEffect="fade" hideEffect="explode">

					<p:messages showDetail="false" showSummary="true" autoUpdate="true" />

					<p:panelGrid id="userDetail" columns="2">
						<f:facet name="header">
							<p:outputLabel value="Detalhes de: " />
							<p:outputLabel value="#{userBean.user.nome}" />
						</f:facet>

						<p:outputLabel for="edit_nome" value="Nome:" />
						<p:inputText id="edit_nome" value="#{userBean.user.nome}" />

						<p:outputLabel for="edit_apelido" value="Apelido:" />
						<p:inputText id="edit_apelido" value="#{userBean.user.apelido}" />

						<p:outputLabel for="edit_email" value="Email:" />
						<p:inputText id="edit_email" value="#{userBean.user.email}" />

						<p:outputLabel for="edit_cell" value="Cell:" />
						<p:inputText id="edit_cell" value="#{userBean.user.cell}" />

						<p:outputLabel value="Tipo de usuario:" />
						<p:selectOneMenu>

						</p:selectOneMenu>

						<f:facet name="footer">
							<p:commandButton icon="ui-icon-refresh" value="Actualizar" />
						</f:facet>
					</p:panelGrid>
				</p:dialog>

				<p:dialog widgetVar="view_dialog" closable="true"
					closeOnEscape="true" modal="false" showEffect="slide"
					hideEffect="slide">
					<p:panelGrid id="viewUser" columns="2">
						<f:facet name="header">
							<p:outputLabel value="Detalhes de: " />
							<p:outputLabel value="#{userBean.user.nome}" />
						</f:facet>

						<p:outputLabel value="Nome:" />
						<p:outputLabel value="#{userBean.user.nome}" />

						<p:outputLabel value="Apelido:" />
						<p:outputLabel value="#{userBean.user.apelido}" />

						<p:outputLabel value="Email:" />
						<p:outputLabel value="#{userBean.user.email}" />

						<p:outputLabel value="Cell:" />
						<p:outputLabel value="#{userBean.user.cell}" />

						<p:outputLabel value="Tipo de usuario:" />
						<p:selectOneMenu>

						</p:selectOneMenu>
					</p:panelGrid>
				</p:dialog>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>
